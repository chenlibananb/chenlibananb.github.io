浙江大华嵌入式工程师岗位笔试题
# 一、选择题（30分，每道5分）
## 1.嵌入式系统由硬件部分和软件部分组成，以下不属于嵌入式系统软件(C)
A.系统内核
B.驱动程序
C.FPGA编程软件
D.嵌入式中间件
## 2.除了I/O设备本身的性能外，影响嵌入式系统I/O数据传输速度的主要因素是（B）
A.Cache存储器性能
B.总线的传输速率
C.主存储器的容量
D.CPU的字长
## 3.在C语言中，将变量申明为volatile类型，其作用为（B）
A.设为静态变量
B.让编译器不再对该变量进行优化
C.设为全局变量
D.节约存储空间
## 4.在实时操作系统中，两个任务并发执行，一个任务要等待其合作伙伴发来信息，或建立某个条件后再向前执行，这种制约性合作关系被称为任务的（A）
A.同步
B.互斥
C.调度
D.执行
## 5.在32位总线系统中，若时钟频率为500MHZ，传送一个32位字需要5个时钟周期，则该总线系统的数据传输速率为（B）MB/s
A.200
B.400
C.600
D.800
## 6.下述程序执行后的输出结果是（A）
```
#include
main()
{
	int x='f';
	printf("%c\n",'a'+(x-'a'+1));
}
```
A.g
B.h
C.i
D.j
# 二简答题（50分，每道10分）
## 1.嵌入式系统，请解释什么是大端模式和小端模式，并举例来说明？
答案:
```
大端是指寄存器的二进制位的字节序是高位在前，小端是指低位在前
```
## 2.找出下面一段ISR中断服务程序的问题
```
__interrupt double compute_area(double radius)
{
	Double area=PI*radius * radius;
	Printf("\n area = %f",area);
	Return area;
}
```
答案：
```
1）ISR不能反悔一个值
2）ISR不能传入参数
3）在许多的处理器/编译器中，浮点一般都是不可重入的，有些处理器/编译器需要让额外的寄存器入栈，有些处理器/编译器就是不允许在ISR中作浮点运算，此外，ISR应该是短而有效率的，在ISR中作浮点运算是不明智的。
4）与第三点一脉相承，printf()经常有重入和性能上的问题
```
## 3.关键字static的作用是什么？
答案：
```
static关键字至少有下列n个作用：
（1）设置变量的存储域，函数体内static变量的作用范围为该函数体，不同于auto变量，该变量的内存只被分配一次，因此其值在下次调用时仍维持上次的值；
（2）限制变量的作用域，在模块内的static全局变量可以被模块内所有函数访问，但不能被模块外其它函数访问；
（3）限制函数的作用域，在模块内的static函数只可被这一模块内的其它函数调用，这个函数的使用范围被限制在申明它的模块内；
```
## 4.嵌入式系统总是要用户对变量或寄存器进行位操作，给定一个整型变量a，写两段代码，第一个设置a的bit3，第二个清除a的bit3.在以上两个操作中，要保持其它位不变。
答案：

```
#define BIT3(0x1 << 3)
static int a;
void set_bit3(void)
{
	a |= BIT3;
}
void clear_bit3(void)
{
	a &= ~BIT3;
}
```
## 5.写出一下程序的运行结果：
```
void getmemory(char *p,int num)
{
	p=(char *)malloc(num);
}
int main()
{
	char *str=NULL;
	getmemory(str,100);
	strcpy(str," hello ");
	printf(str);
	return 0;
}
```
答案：
```
结果是段错误 Segmentation fault(core dumped)
因为printf(str)没有指定输出格式，要改成printf("%s",str);
```
# 三、编程题（20分）
## 1.为了提高字符串存储密度，采用块链的方式来存储，示意图如下：

```
-----------       ----------        ---------       ---------        ---------------------
| head    |------>| buffer |   |--->| buffer|  |--->| buffer|  |---->| buffer(with '\0') |
| tatil   |--     | next   |----    | next  |---    | next  |---  |->| next(NULL)        |
| len     | |     ----------        ---------       ---------     |  ---------------------
----------- |_____________________________________________________|

```

每一个块存放多个字符，并指向下一个块，最后一个链块包括字符串零结束符和链表结束空指针：

```
#define N 4
typedef struct Block
{
	char buffer[N];
	struct Block *next;
} Block;
```

采用块存储的字符串用一个结构体来表示，包括块链的头节点指针，为了使用方便，同时还包括尾节点指针和完整的字符串长度：

```
typedef struct 
{
	Block *head;
	Block *tail;
	int len;
} BLString;
```

请完成块链字符串的查找操作函数，s1表示原字符串，s2表示待查询的子字符串，返回子字符串在原字符串里首次出现的偏移，如果找不到则返回-1；

```
int BLStringFind(BLString* s1,BLString* s2)
{
	return -1
}
```